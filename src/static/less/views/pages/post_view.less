
@import "../components/formatting.less";
@import "../common.less";

@postColWidth: 740px;
@postColPadding: 30px;

[data-page=post] {
	background: fadeout(black, 30%);
	z-index: 60 !important;

	.postBox {
		min-width: @postColWidth;
		z-index: 1000;
		display: table;
		margin: 40px auto;
		.transition-transform(.4s, linear);

		& > .close-btn {
			position: fixed;
			top: 10px;
			right: 34px;
			font-weight: bold;
		}

		.postCol {
			width: @postColWidth;
			width: (@postColWidth+50);
			position: relative;
			z-index: 1002;
			background: white;
			font-family: museo-sans;
			margin: auto;
			.box-shadow(0,0,10px,.5);

			.postHeader {
				padding: @postColPadding @postColPadding (@postColPadding - 15);
				border-bottom: 1px solid #EAEAEA;
				word-wrap: break-word;

				.type, time {
					color: #888;
					font-size: 13px;
					display: inline-block;
				}
				.type {
					text-transform: uppercase;
					padding: 5px;
				}
				time {
					cursor: default;
					float: right;
				}
				.views {
					.icon-circle {
						margin: 0 5px;
						font-size: 3px;
					}
				}

				.postTitle {
					color: #555;
					font-weight: 800;
					font-size: 40px;
					line-height: 1.1;
					margin: 20px 0 20px;
				}
				
				.tags {
					float: right;
					.tag {
						background: #BBB;
						color: white !important;
						.transition(all, .2s, linear);
						padding: 4px 6px;
						font-size: 12px;
						text-transform: uppercase;
						border-bottom: 2px solid #888;
						display: inline-block;
						margin-left: 5px;
						&:not(:hover) {
							border-color: transparent;
						}
					}
				}

				.authorInfo {
					// float: left;
					// margin-left: -10px;
					display: inline-block;
					.avatarWrapper {
						height: 25px;
						width: 25px;
						border-radius: 40px;
						margin: 0 6px 0 0;
						// .box-shadow(1px, .4);
					}
					.username {
						font: 13px museo-sans;
						color: #444;
					}
				}
			}

			.postBody {
				clear: both;
				overflow: hidden;
				color: #333;
				padding: @postColPadding;

				.postBodyFormatting;
				word-wrap: break-word;
				font-size: 15px;

				h1, h2, h3, h4, h5, h6 {
					font-family: museo-sans, "Helvetica Neue", Helvetica, Arial, sans-serif;
				}
				
				& > img, & > iframe {
					margin: 30px 0;
					max-width: 100%;
				}
				p:first-child img:first-child,
				& > img:first-child {
					max-width: 790px;
					margin: -@postColPadding -@postColPadding @postColPadding -@postColPadding;
					width: 790px;
				}
				& > *:last-child {
					margin-bottom: 0;
				}

				p:empty { display: none; }
			}

			.postFooter {
				padding: .1px;

				.discussionSection {
					font-size: 13px;
					background: #EEE;
					overflow: hidden;

					.exchange-input {
						padding: 15px 20px;
						border-top: 1px solid #DDD;
						width: 100%;
						display: table;
						
						& > .left {
							display: table-cell;
							vertical-align: top;
							width: 50px;
							.user-avatar {
								border-radius: 40px;
								width: 40px;
								height: 40px;
								// .box-shadow(0 0 0 1px rgba(0,0,0,.2));
							}
						}

						& > .right {
							display: table-cell;
							vertical-align: top;
							padding-left: 15px;
							width: 100%;
							
							.toolbar {
								width: 100%;
								display: table;

								.toolbar-left,
								.toolbar-right {
									display: table-cell;
								}
								.toolbar-right { text-align: right; }
								.toolbar-left { text-align: left; }

								button {
									margin-left: 10px; 
								}

								[data-action=send-comment] {
									.high-xbtn(white, @COLOR2, 2px);
									padding: 8px 15px;
								}
								[data-action=preview-comment] {
									.xbtn(#333, #EEE);
									.transition;
									&:hover {
										background: #DDD;
										color: #222;
										border-color: #BBB; 
									}
									padding: 8px 10px;
									border: 1px solid #CCC;
								}
							}

							textarea {
								padding: 11px;
								border-radius: 3px;
								width: 100%;
								border: 1px solid #BBB;
								max-width: 100%;
								height: 41px;
								resize: vertical;
								.transition;
								&:focus {
									outline: 0;
									.inner-shadow(2px,.2);
									border-color: #AAA;
								}
							}
						}
					}

					.exchanges {
						list-style: none;
						padding: 15px 0 0;

						.exchanges-info {
							padding: 20px;
							font-size: 20px;
							label {
							}
						}

						.exchange {
							overflow-wrap: break-word;
							border-top: 1px solid #DDD;
							background: #F9F9F6;

							.line {
								display: table;
								width: 100%;

								.line-user {
									display: table-cell;
									width: 65px;
									vertical-align: top;
									padding: 15px 15px;

									.user-avatar {
										// .box-shadow(0 0 0 1px rgba(0,0,0,.15));
										width: 35px;
										height: 35px;
										border-radius: 35px;
									}
								}

								.name {
									font: 12px museo-sans;
									color: #333;
									text-transform: uppercase;

									a {
										color: #333;
									}

									.label {
										display: inline-block;
										border-radius: 3px;
										border: 1px solid #BBB;
										color: #666;
										font-size: 11px;
										padding: 1px 4px;
										margin-left: 5px;
									}
								}

								time {
									font-size: 11px;
									float: right;
								}

								.line-msg {
									display: table-cell;
									vertical-align: top;
									min-height: 40px;
									padding: 15px 0;

									.line-msg-body {
										vertical-align: middle;
										display: inline-block;
										.no-box-shadow;
										outline: none;
										font-size: 13px;
										width: 100%;
										position: relative;
										padding: 5px 0;

										.arrow {
											content: '';
											border: 5px solid transparent;
											border-top-color: #DDD;
											bottom: -10px;
											position: absolute;
											left: 20px;
										}
									}
								}

								.toolbar {
									display: table-cell;
									width: 75px;
									padding: 12px;

									.reply {
										.xbtn(@COLOR1, #EEE);
									}
									.thumbsup {
										.xbtn(@GREEN, #EEE);
									}
									.delete {
										.xbtn(@COLOR4, #EEE);
									}
									.edit {
										.xbtn(@COLOR1, #EEE);
									}

									[data-voted=true] {
										.xbtn(white, @COLOR2);
										border: 1px solid transparent;
									}

									.reply, .thumbsup, .delete, .edit {
										width: 60px;
										padding: 0 !important;
										line-height: 25px !important;
										margin-bottom: 3px;
									}
									.reply, .thumbsup:not([data-voted=true]), .edit, .delete {
										border: 1px solid #CCC;
										&:hover {
											border: 1px solid #AAA;
										}
									}

									.group {
										display: table;
										width: 60px;
										button {
											width: 30px !important;
											display: inline-block !important;
										}
										button:nth-child(1) {
											border-right: 0;
											.border-radius(0, 0, 2px, 2px);
										}
										button:nth-child(2) {
											.border-radius(2px, 2px, 0, 0);
										}
									}
								}
							}

							textarea {
								width: 100%;
								resize: vertical;
							}

							ul.children {
								// padding-left: 20px;
								border-left: 20px solid #AAA;

								.exchange-input {

									& > .right {
										.toolbar {
											button {
												margin-left: 10px; 
											}

											[data-action=send-comment] {
												padding: 6px 10px;
												font-size: 12px;
											}
											[data-action=preview-comment] {
												.xbtn(#333, #EEE);
												padding: 6px 8px;
												font-size: 12px;
											}
										}

										textarea {
											padding: 5px;
											border-radius: 3px;
											width: 100%;
											border: 1px solid #BBB;
											max-width: 100%;
											height: 31px;
										}
									}
								}

								.exchange-input .user-avatar,
								.line-user .user-avatar {
									width: 30px !important;
									height: 30px !important;
								}

								.exchange {
									background: #EEE;
									.line-user {
										width: 55px !important;
									}
								}
							}
						}
						.commentWrapper:target {
							background: yellow;
						}
					}
				}

				.commentSection {
					font-size: 13px;
					background: #EEE;
					overflow: hidden;

					.commentList {
						list-style: none;
						padding: 0 5px;

						.commentWrapper:last-child {
							padding-bottom: 5px;
						}

						.commentWrapper {
							overflow-wrap: break-word;

							.msgBody {
								vertical-align: middle;
								display: inline-block;
								.no-box-shadow;
								background: white;
								outline: none;
								font-size: 13px;
								width: 100%;
								position: relative;

								border: 1px solid #DDD;

								.arrow {
									content: '';
									border: 5px solid transparent;
									border-top-color: #DDD;
									bottom: -10px;
									position: absolute;
									left: 20px;
								}
							}

							.infoBar {
								position: relative;
								padding: 5px;
								font-size: 14px;

								.author {
									color: #333;
									text-decoration: none;

									&:hover {
										color: #333;
									}

									& > .avatarWrapper {
										height: 20px;
										width: 20px;
										vertical-align: middle;
										margin-right: 5px;
										border-radius: 15px;
									}

									& > .name {
										vertical-align: middle;
									}
								}

								.voteOptions {
									display: inline-block;
									vertical-align: middle;
									margin: 0 10px;
									cursor: pointer;
									i { font-size: 14px; }
									&:hover {
										color: #222;
									}
								}

								.time {
									font-size: 11px;
								}

								.optionBtns {
									display: inline-block;

									[data-action=remove-post],
									[data-action=edit-post] {
										.reset-button;
										.user-select(none);
										font-size: 15px;
										color: #888;
										padding: 0;
										vertical-align: middle;
										margin: -2px 0 0 8px;
										.no-box-shadow;
										&:hover {
											color: #444;
										}
									}
								}
							}
						}
						.commentWrapper:target {
							background: yellow;
						}
					}

					.commentInputSection {
						position: relative;
						padding: 10px;
						display: table;
						width: 100%;
						
						.avatarWrapper {
							border: 1px solid #DDD;
						}

						textarea {
							.transition(border-color, .2s, linear);
							vertical-align: middle;
							display: inline-block;
							border: 1px solid #DDD;
							.no-box-shadow;
							outline: none;
							font-size: 13px;
							padding: 10px;
							text-align: left;

							width: 100%;
							height: 50px;
							&:focus {
								border-color: #666;
								height: 35px;
							}
							resize: vertical;
						}

						.count {
							padding: 10px;
							font-size: 18px;
							line-height: 50px;

							&.empty {
								color: #AAA;
							}
							&.ilegal {
								color: red;
							}
						}

						[data-action=send-comment] {
							.high-xbtn(white, @COLOR2, 2px, 8px, 11px);
							display: inline-block;
							margin-top: 9px;
							float: right;
							font-size: 13px;
						}
					}

					.showInput {
						padding: 8px 10px;
						font-size: 13px;
						color: #888;
						background: white;

						border: 1px solid #DDD;
						cursor: pointer;
						.transition(all, .2s, linear);
						&:hover {
							color: #666;
						}
					}

					&:not(.small) {
						border-top: 1px solid #DDD;

						.commentList {
							padding: 20px 0 0;

							label {
								font-size: 17px;
								text-transform: uppercase;
								padding: 0 15px;
								font-weight: normal;
							}

							.commentWrapper {
								padding: 10px 10px 0;
								.msgBody {
									padding: 9px;
									font-size: 14px;
								}

								.infoBar {
									padding: 5px;
									font-size: 14px;

									.avatarWrapper {
										width: 40px;
										height: 40px;
										vertical-align: middle;
										border-radius: 40px;
									}
								}
							}
						}

						.showInput {
							margin: 10px 10px 10px;
						}
					}
				}
			}
		}

		.question {
			display: table;
			width: 950px;

			.contentCol {
				width: 650px;
				display: table-cell;
				vertical-align: top;

				.header {
					height: 50px;

					& > .user-avatar {
						width: 50px;
					}

					.title {
						display: inline-block;
						height: 50px;
						line-height: 50px;
						padding: 0 5px;
						font: bold 23px museo-sans;
					}
				}

				.body-window {
					height: 350px;
					overflow-y: auto;

					.title {
						font: 23px museo-sans; 
					}

					.body-window-content {
						padding: 30px;

						.postBody {
							padding: 0;
						}
					}
				}

				.fixed-footer {
					height: 60px;
					line-height: 60px;
					padding: 0 20px;
					border-top: 1px solid #DDD;
					-webkit-box-shadow: 0 -33px 20px -35px rgba(0,0,0,.5); 
					-moz-box-shadow: 0 -33px 20px -35px rgba(0,0,0,.5);
					box-shadow: 0 -33px 20px -35px rgba(0,0,0,.5); 

					.user-avatar {
						width: 30px;
						height: 30px;
						border-radius: 30px;
						margin-right: 10px;
					}
					.info {
						display: inline-block;
						color: #777;
						font-size: 15px;
						a {
							color: mix(#444, blue, 95%);
							text-decoration: underline;
						}
					}
					.actions {
						display: inline-block;
						float: right;
					}
				}
			}

			.rightCol {
				width: 300px;
				display: table-cell;
				padding: 30px;
				border-left: 1px solid #DDD;
				color: white;
				background: #EEE;
				&.alternative {
					background: mix(@COLOR1, @COLOR2);
				}

				.answer-col-mc {
					width: 300px;
					display: table-cell;

					li {
						display: block;
						margin: 0 0 6px;
						list-style: none;

						button {
							.high-xbtn(white, mix(@COLOR1, @COLOR2));
							margin: 0;
							text-align: left;
							width: 100%;
							font: 17px museo-sans;
						}
					}
				}
			}
		}

		.answer-col {
			// width: 200px;
			background: #333;
			display: table;
			width: 100%;
			color: white;
			
			.left {
				display: table-cell;
				padding: @postColPadding;

				.postBody {
					color: white;
					padding: 0;
				}
				.sauce {
					font-size: 12px;
					color: #DDD;
					margin-top: 10px;
					.detail {
						font-size: 10px;
						text-transform: uppercase;
						background: #EEE;
						display: inline-block;
						padding: 3px 5px;
						color: #222;
						border-radius: 4px;
					}
				}
			}
			.answer-col-mc {
				width: 300px;
				display: table-cell;
				padding: 30px;

				li {
					display: block;
					margin: 0 0 6px;
					list-style: none;

					button {
						.high-xbtn(white, mix(@COLOR1,@COLOR2));
						margin: 0;
						text-align: left;
						width: 100%;
						font: 17px museo-sans;
					}
				}
			}
		}
	}
}


@media (max-width: @postColWidth) {
	.postBox {
		min-width: 0 !important;
		max-width: 100% !important;
		width: 100% !important;
		display: block !important;

		.postCol {
			max-width: 100%;
			padding: 0;
			width: 100%;
			.postHeader {
				padding: 20px;
			}
			.postBody {
				padding: 20px;
			}
		}
	}
}
